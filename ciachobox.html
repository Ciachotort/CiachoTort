<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CiachoTort</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  .fly-img { position: absolute; transition: all 0.8s ease; z-index: 50; pointer-events: none; max-width: 80px; border-radius: 12px; }
  .product-card:hover img { transform: scale(1.05); transition: transform 0.3s ease; }
  .product-card:hover { box-shadow: 0 10px 20px rgba(0,0,0,0.15); transition: box-shadow 0.3s ease; }
  .error { border-color: #dc2626; }
  .error-message { color: #dc2626; font-size: 0.875rem; }
</style>
</head>
<body class="bg-gray-50 text-gray-800">
<header class="bg-pink-600 text-white p-4 flex justify-between items-center sticky top-0 z-40">
<h1 class="text-2xl font-bold">CiachoTort</h1>
<div id="cart-icon" class="relative cursor-pointer">🛒 <span id="cart-count" class="bg-white text-pink-600 text-xs font-bold px-2 py-0.5 rounded-full absolute -top-2 -right-2">0</span></div>
</header>

<nav class="flex justify-center gap-6 my-6">
<button onclick="showCategory('torty')" class="px-4 py-2 bg-pink-200 rounded-lg hover:bg-pink-300">Torty</button>
<button onclick="showCategory('ciasta')" class="px-4 py-2 bg-pink-200 rounded-lg hover:bg-pink-300">Ciasta</button>
<button onclick="showCategory('ciastka')" class="px-4 py-2 bg-pink-200 rounded-lg hover:bg-pink-300">Ciastka</button>
<button onclick="scrollToContact()" class="px-4 py-2 bg-pink-200 rounded-lg hover:bg-pink-300">Kontakt</button>
</nav>

<main class="max-w-6xl mx-auto p-4" id="products-container">
  <!-- Produkty wypełniane dynamicznie -->
</main>

<section id="cart-section" class="max-w-4xl mx-auto my-8 p-4 bg-white shadow rounded-xl hidden">
<h2 class="text-xl font-bold mb-4">Twój koszyk</h2>
<table class="w-full border text-sm">
<thead><tr class="bg-gray-100"><th class="p-2">Produkt</th><th>Ilość</th><th>Cena</th><th>Usuń</th></tr></thead>
<tbody id="cart-body"></tbody>
</table>
<p class="text-right font-bold mt-2">Suma: <span id="cart-total">0 zł</span></p>
<button onclick="clearCart()" class="mt-3 bg-gray-200 px-3 py-1 rounded-lg hover:bg-gray-300">Wyczyść koszyk</button>
</section>

<section id="order-form" class="max-w-5xl mx-auto my-8 p-4 bg-white shadow rounded-xl hidden">
<h2 class="text-xl font-bold mb-4">Formularz zamówienia</h2>
<div class="grid md:grid-cols-2 gap-8">
<form id="orderForm" class="grid gap-4">
<input type="text" id="name" placeholder="Imię i nazwisko" required class="border p-2 rounded w-full"><p id="error-order-name" class="error-message hidden">Podaj swoje imię i nazwisko</p>
<input type="text" id="address" placeholder="Adres dostawy" required class="border p-2 rounded w-full"><p id="error-order-address" class="error-message hidden">Podaj adres dostawy</p>
<input type="tel" id="phone" placeholder="Telefon" required class="border p-2 rounded w-full"><p id="error-order-phone" class="error-message hidden">Podaj poprawny numer telefonu (9 cyfr)</p>
<div class="flex gap-2">
<button type="submit" class="bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700">Złóż zamówienie</button>
<button type="button" id="previewPdf" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Podgląd PDF</button>
</div>
</form>
<div>
<h3 class="text-lg font-semibold mb-3">Podsumowanie zamówienia</h3>
<ul id="order-summary" class="space-y-2 text-sm border rounded p-3 bg-gray-50"></ul>
<p class="font-bold mt-2">Suma: <span id="order-total">0 zł</span></p>
</div>
</div>
</section>

<section id="contact" class="max-w-4xl mx-auto my-12 p-6 bg-white shadow-lg rounded-xl">
<h2 class="text-2xl font-bold mb-4">Kontakt</h2>
<p class="mb-2">Masz pytania lub chcesz zamówić indywidualnie? Skontaktuj się z nami!</p>
<p><strong>Adres:</strong> ul. Słodka 12, 00-123 Warszawa</p>
<p><strong>Telefon:</strong> +48 123 456 789</p>
<p><strong>Email:</strong> kontakt@ciachobox.pl</p>
<form onsubmit="submitContact(event)" class="grid gap-4 my-6">
<input type="text" id="contact-name" placeholder="Imię i nazwisko" required class="border p-2 rounded w-full"><p id="error-name" class="error-message hidden">Podaj swoje imię i nazwisko</p>
<input type="email" id="contact-email" placeholder="Adres e-mail" required class="border p-2 rounded w-full"><p id="error-email" class="error-message hidden">Podaj poprawny adres e-mail</p>
<textarea id="contact-message" rows="4" placeholder="Twoja wiadomość" required class="border p-2 rounded w-full"></textarea><p id="error-message" class="error-message hidden">Wpisz treść wiadomości</p>
<button type="submit" class="bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700">Wyślij wiadomość</button>
</form>
</section>

<script>
const products = [
  {id:1,name:'Tort Orzechowy',price:80,img:'images/ciastko.jpg',category:'torty'},
  {id:2,name:'Tort Malinowy',price:85,img:'images/tort-malinowy.jpg',category:'torty'},
  {id:2,name:'Tort Malinowy',price:85,img:'images/tort-malinowy.jpg',category:'torty'},
  {id:2,name:'Tort Malinowy',price:85,img:'images/tort-malinowy.jpg',category:'torty'},
  {id:2,name:'Tort Malinowy',price:85,img:'images/tort-malinowy.jpg',category:'torty'},
  {id:3,name:'Ciasto Czekoladowe',price:45,img:'images/ciasto-czekoladowe.jpg',category:'ciasta'},
  {id:4,name:'Ciastko Maślane',price:12,img:'images/ciastko-maslane.jpg',category:'ciastka'}
];

let cart = [];

function scrollToContact(){
  document.getElementById('contact').scrollIntoView({ behavior: 'smooth' });
}

function showCategory(cat){
  const container=document.getElementById('products-container');
  container.innerHTML='';
  products.filter(p=>p.category===cat).forEach(p=>{
    const card=document.createElement('div');
    card.className='product-card bg-white p-4 rounded-lg shadow text-center';
    card.innerHTML=`<img src='${p.img}' alt='${p.name}' class='mx-auto mb-2 w-32 h-32 object-cover rounded'><h3 class='font-bold mb-1'>${p.name}</h3><p class='mb-2'>${p.price} zł</p><button class='add-to-cart bg-pink-600 text-white px-4 py-1 rounded-lg hover:bg-pink-700'>Dodaj do koszyka</button>`;
    card.querySelector('.add-to-cart').addEventListener('click',(e)=>{addToCart(p, e)});
    container.appendChild(card);
  });
  document.getElementById('cart-section').classList.remove('hidden');
  document.getElementById('order-form').classList.remove('hidden');
}

function addToCart(product, event){
  const existing=cart.find(i=>i.id===product.id);
  if(existing){ existing.quantity++; } else { cart.push({...product,quantity:1}); }
  updateCart();
  // Animacja przeskoku obrazka
  const img = event.target.closest('.product-card').querySelector('img');
  const flyImg = img.cloneNode(true);
  const rect = img.getBoundingClientRect();
  flyImg.style.top = rect.top + 'px';
  flyImg.style.left = rect.left + 'px';
  flyImg.classList.add('fly-img');
  document.body.appendChild(flyImg);
  const cartIcon = document.getElementById('cart-icon').getBoundingClientRect();
  setTimeout(()=>{
    flyImg.style.top = cartIcon.top + 'px';
    flyImg.style.left = cartIcon.left + 'px';
    flyImg.style.width = '20px';
    flyImg.style.height = '20px';
    flyImg.style.opacity = 0;
  },10);
  setTimeout(()=> document.body.removeChild(flyImg),800);
}

function updateCart(){
  const body=document.getElementById('cart-body');
  const count=document.getElementById('cart-count');
  const totalEl=document.getElementById('cart-total');
  body.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td class='p-2'>${item.name}</td><td class='p-2'><input type='number' min='1' value='${item.quantity}' class='w-16 border rounded p-1'/></td><td class='p-2'>${item.price*item.quantity} zł</td><td class='p-2'><button class='text-red-600'>Usuń</button></td>`;
    tr.querySelector('input').addEventListener('change',(e)=>{item.quantity=parseInt(e.target.value); updateCart();});
    tr.querySelector('button').addEventListener('click',()=>{cart=cart.filter(i=>i.id!==item.id); updateCart();});
    body.appendChild(tr);
    total+=item.price*item.quantity;
  });
  count.textContent=cart.reduce((a,b)=>a+b.quantity,0);
  totalEl.textContent=total+' zł';
}

function clearCart(){cart=[]; updateCart();}
</script>
</body>
</html>
